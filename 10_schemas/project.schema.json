{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/cleanshipcz/ai-tools/schemas/project.schema.json",
  "title": "Project Manifest",
  "description": "Schema for project-specific configuration manifests",
  "type": "object",
  "required": ["id", "version", "name", "description"],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$",
      "description": "Unique kebab-case identifier for the project"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Semantic version (semver) of the project configuration"
    },
    "name": {
      "type": "string",
      "minLength": 3,
      "maxLength": 100,
      "description": "Human-readable project name"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 500,
      "description": "Brief description of the project"
    },
    "context": {
      "type": "object",
      "properties": {
        "overview": {
          "type": "string",
          "description": "Detailed project overview and background"
        },
        "purpose": {
          "type": "string",
          "description": "Primary purpose or goal of the project"
        }
      },
      "description": "Contextual information about the project"
    },
    "tech_stack": {
      "type": "object",
      "properties": {
        "languages": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Programming languages used"
        },
        "frontend": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Frontend frameworks and libraries"
        },
        "backend": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Backend frameworks and libraries"
        },
        "database": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Database systems"
        },
        "infrastructure": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Infrastructure and deployment tools"
        },
        "tools": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Development tools and utilities"
        }
      },
      "description": "Technology stack used in the project"
    },
    "documentation": {
      "type": "object",
      "properties": {
        "readme": {
          "type": "string",
          "description": "Path to README file"
        },
        "contributing": {
          "type": "string",
          "description": "Path to CONTRIBUTING guide"
        },
        "architecture": {
          "type": "string",
          "description": "Path to architecture documentation"
        },
        "code_style": {
          "type": "string",
          "description": "Path to code style guide"
        },
        "api_docs": {
          "type": "string",
          "description": "Path to API documentation"
        },
        "custom": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Additional custom documentation references"
        }
      },
      "description": "References to project documentation"
    },
    "commands": {
      "type": "object",
      "additionalProperties": {
        "anyOf": [
          {
            "type": "string"
          },
          {
            "type": "object",
            "additionalProperties": {
              "type": "string"
            }
          }
        ]
      },
      "description": "Common commands organized by category (dev, build, test, etc.)"
    },
    "conventions": {
      "type": "object",
      "properties": {
        "naming": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Naming conventions"
        },
        "patterns": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Code patterns and best practices"
        },
        "testing": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Testing conventions"
        },
        "structure": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Project structure conventions"
        },
        "custom": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Custom project-specific conventions"
        }
      },
      "description": "Project conventions and standards"
    },
    "ai_tools": {
      "type": "object",
      "properties": {
        "model": {
          "type": "string",
          "enum": [
            "claude-sonnet-4.5",
            "claude-sonnet-4",
            "claude-haiku-4.5",
            "gpt-5",
            "gpt-5.1",
            "gpt-5.1-codex-mini",
            "gpt-5.1-codex"
          ],
          "description": "Default model for this project (overrides agent default, can be overridden by feature)"
        },
        "preferred_rulepacks": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
          },
          "description": "List of preferred rulepack IDs for this project"
        },
        "custom_rules": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Project-specific rules for AI tools"
        },
        "whitelist_agents": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
          },
          "description": "Agent IDs to include (mutually exclusive with blacklist_agents)"
        },
        "whitelist_prompts": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Prompt IDs or paths to include (e.g., 'extract-method' or 'refactor/extract-method') (mutually exclusive with blacklist_prompts)"
        },
        "whitelist_rulepacks": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9]+(-[a-z0-9]+)*$"
          },
          "description": "Rulepack IDs to include (mutually exclusive with blacklist_rulepacks)"
        },
        "blacklist_agents": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Agent IDs to exclude from this project (mutually exclusive with whitelist_agents)"
        },
        "blacklist_prompts": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Prompt IDs or paths to exclude (e.g., 'extract-method' or 'refactor/extract-method') (mutually exclusive with whitelist_prompts)"
        },
        "blacklist_rulepacks": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Rulepack IDs to exclude from this project (mutually exclusive with whitelist_rulepacks)"
        }
      },
      "allOf": [
        {
          "oneOf": [
            {
              "not": {
                "anyOf": [
                  { "required": ["whitelist_agents"] },
                  { "required": ["blacklist_agents"] }
                ]
              }
            },
            { "required": ["whitelist_agents"] },
            { "required": ["blacklist_agents"] }
          ]
        },
        {
          "oneOf": [
            {
              "not": {
                "anyOf": [
                  { "required": ["whitelist_prompts"] },
                  { "required": ["blacklist_prompts"] }
                ]
              }
            },
            { "required": ["whitelist_prompts"] },
            { "required": ["blacklist_prompts"] }
          ]
        },
        {
          "oneOf": [
            {
              "not": {
                "anyOf": [
                  { "required": ["whitelist_rulepacks"] },
                  { "required": ["blacklist_rulepacks"] }
                ]
              }
            },
            { "required": ["whitelist_rulepacks"] },
            { "required": ["blacklist_rulepacks"] }
          ]
        }
      ],
      "description": "AI tool configuration for this project"
    },
    "metadata": {
      "type": "object",
      "properties": {
        "repository": {
          "type": "string",
          "format": "uri",
          "description": "Repository URL"
        },
        "maintainers": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of maintainer emails or names"
        },
        "created": {
          "type": "string",
          "format": "date",
          "description": "Creation date"
        },
        "updated": {
          "type": "string",
          "format": "date",
          "description": "Last update date"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Tags for categorization"
        }
      },
      "description": "Project metadata"
    }
  }
}
