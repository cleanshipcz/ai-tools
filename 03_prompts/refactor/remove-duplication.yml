id: remove-duplication
version: 1.0.0
description: Identify and eliminate code duplication (DRY principle)
tags:
  - refactor
  - duplication
  - dry
variables:
  - name: code
    required: true
    description: 'The code containing duplication'
  - name: language
    required: true
    description: 'Programming language of the code'
  - name: context
    required: false
    description: 'Additional context about the codebase'
includes:
  - ../shared/constraints.md
rules:
  - 'Extract common logic into reusable functions.'
  - 'Preserve behavior of all duplicated sections.'
  - 'Use appropriate abstraction level.'
  - 'Avoid over-abstraction for minor duplication.'
content: |
  Eliminate duplication in the following {{language}} code:

  ```{{language}}
  {{code}}
  ```

  {{#context}}
  Context: {{context}}
  {{/context}}

  Analysis:
  1. Identify duplicated or similar code patterns
  2. Determine the appropriate abstraction (function, class, utility)
  3. Extract common logic while preserving differences
  4. Use parameterization for variations

  Provide:
  1. **Analysis**: Duplicated patterns identified
  2. **Refactored Code**: DRY implementation with extracted functions
  3. **Rationale**: Why this abstraction is appropriate
  4. **Usage Examples**: How callers use the extracted code

  {{> constraints}}
outputs:
  format: code
metadata:
  author: 'AI Tools Team'
  created: '2025-11-15'
